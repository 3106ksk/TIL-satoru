# 整形方法見直し + daily_2026-02-17 生成プラン

## Context

W07の週次レビュー（weekly-report-2026-W07.md）で「Top1 + 切れたら→方式」が実験として採用され、
また `ai_learning_methodology.md` の思想（シェアと言語化による定着）をdailyログに反映するため、
今週（W08）から以下2点を追加変更した。

1. **Stats**: `切れたら→` フィールドを追加
2. **新セクション: ■ 今日の学習記録**: 4項目で構造化した知識共有セクション

---

## 変更点の詳細設計

### 1. Stats — `切れたら→` フィールドの追加

```markdown
## ■ Stats
- **Day Mode**: ...
- **Budget**: ...
- **Total Min**: ...
- **純粋な学習時間**: ...
- **休憩時間**: ...
- **運動時間**: ...
- **Avg Deep Score**: ...
- **Top1**: ...
- **Done条件**: ...
- **切れたら→**: ...    ← NEW
```

- 生データ `### 🔄 集中が切れたら→` の直下にある太字テキストを抽出して転記
- 上記セクションが存在しない場合のみ「（未設定）」と記載
- 2026-02-17の抽出結果:
  - `過去のRUNTEQアーカイブ動画（rails new + デプロイ）を視聴してメモ作成`

---

### 2. 新セクション: ■ 今日の学習記録

**目的**: `ai_learning_methodology.md` の日報フォーマットを体系化し、
「他人にシェアできる言語化」を日常の出力として定着させる。

**配置**: `## ■ Insights` の後 / `## ■ Study Strategy for Next Day` の前

**構造**:
```markdown
## ■ 今日の学習記録

**今日やったこと**
- {セッション概要を narrative に記述。何に取り組んだか、流れで書く}

**詰まったこと**
- {行き詰まった具体的な箇所・問題を箇条書き}

**なぜそうなったか**
- {詰まった原因・根本的なメカニズムを説明}

**何を学んだか**
- {得られた知識・理解・気づきを箇条書き。他人が読んでも分かるレベルで}
```

**データソース**:
| 項目 | 生データの対応箇所 |
|---|---|
| 今日やったこと | セッションノート（各セッションの「やった：」を統合） |
| 詰まったこと | 生データ `■ 詰まった点` セクション |
| なぜそうなったか | 生データの詰まった記述から AI が因果を言語化 |
| 何を学んだか | 生データ `学んだこと` + `■ Technical Learnings` |

**既存セクションとの役割分担**:
| セクション | 役割 |
|---|---|
| ■ 今日の学習記録 | 知識共有・言語化。他者が読んで学べる形式 |
| ■ Worked / Slipped / Insights | メタ認知・行動パターン分析（AI生成） |
| ■ Technical Learnings | コード・技術のQ&A（存在する場合のみ） |

---

## 2026-02-17 のデータ確認

### Stats 算出
- **Budget**: 360 min
- **Total Min**: 689 min（全セッション合計確認: 32+33+55+65+80+51+86+14+27+69+51+72+54 = 689 ✓）
- **純粋な学習時間**: 495 min（Rest・Exercise除く全セッション合計）
- **Deep Work Min（参考指標）**: 355 min（定義: DSが4以上の合計時間）
- **休憩時間**: 143 min（65+51+27）
- **運動時間**: 51 min（サーグ式 1セット）
- **Avg Deep Score**: 3.346（生データより）
- **Top1**: 機能の言語化 → 技術選定リスト作成 → rails new 実行まで完了
- **Done条件**: 12:00までにrails newが完了し、GitHubにpushされている状態。技術選定リストがMarkdownで残っている。
- **切れたら→**: 過去のRUNTEQアーカイブ動画（rails new + デプロイ）を視聴してメモ作成

### 今日の学習記録 ソースデータ（生データから）

**詰まった点**:
- 機能定義後、テーブル設計の着手方法が不明確
- Tips掲示板テーブルの切り出し方で混乱
- 「Tipsが特定のUserに所属している」エンティティ間リレーションの理解不足
- 非正規化→正規化の逆順学習による混乱

**学んだこと**:
- 非正規化テーブル = 同じカラムの値が重複した状態
- データの冗長性 → ストレージコスト増 + データ不整合リスク
- キャッシュ・履歴管理のためにあえて冗長性を残すケースもある
- テーブル設計の核心: 「このカラムはどのIDに所属しているか？」
- 正規化プロセス = xxx_idを切り出して別テーブルを作成する作業

---

## 更新後のセクション順序（確定版）

```
# 2026-02-17

## ■ Stats          ← 切れたら→ 追加
## ■ Top1 / Done条件 達成度フィードバック  ← 変更なし（AI生成）
## ■ 時間配分フィードバック               ← 変更なし（AI生成）
## ■ Worked                              ← 変更なし
## ■ Slipped                             ← 変更なし
## ■ Insights                            ← 変更なし
## ■ 今日の学習記録   ← NEW（4項目）
## ■ Study Strategy for Next Day         ← 変更なし
## ■ Technical Learnings                 ← 今日は技術Q&Aなし → 省略
```

---

## 実装手順

1. `.claude/skills/format_daily_log/SKILL.md` を最新基準（Single Source of Truth）として更新
   - `■ Stats` に `切れたら→` 追加
   - `■ 今日の学習記録` セクション追加（4項目構造）
   - `切れたら→` 抽出ルール（`### 🔄 集中が切れたら→` 直下太字）を明記
2. `.claude/skills/daily_log_qc/SKILL.md` を同時更新
   - 必須セクションに `■ 今日の学習記録` を追加
   - Stats必須項目に `切れたら→` を追加
3. `daily/daily_2026-02-17.md` を上記フォーマットで生成
4. 更新後の `daily_log_qc` 観点で検証

---

## 検証

- [ ] Stats の合計値がセッションCSVと一致するか
- [ ] 切れたら→ フィールドが Stats に含まれているか
- [ ] `切れたら→` が生データ `### 🔄 集中が切れたら→` 直下太字から抽出されているか
- [ ] `■ 今日の学習記録` が 4項目構造になっているか
- [ ] 今日の学習記録の内容が生データの 詰まった点・学んだこと と一致するか
- [ ] Worked/Slipped/Insights との役割が明確に分離されているか
- [ ] Technical Learnings が生データに該当なしのため省略されているか
