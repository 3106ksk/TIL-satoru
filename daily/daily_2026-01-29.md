# 2026-01-29 Daily Review

## Stats
- **Day Mode**: Shift (ON)
- **Total Min**: 186 min
- **Deep Score**: 3.73
- **Top1**: ブックマークのcreateとdestroyを言語化する

## Context & Reflection
### Worked
- 事実: destoryアクション定義をid仮説で実装→ 予想通りに行かなかったのでデバッグプロセスを使って言語化→ その中で理解できていないコードがあることを知れて調べることができた / 結果: destroyアクションでブックマーク削除をcreateアクション定義時よりも早くすることができた

### Slipped
- 事実: 技術面談を行う予定だったが、できなかった / トリガー: そもそもの設計としてシフト日は学習可能時間が短い中でカリキュラム x 技術面談という設計だと、カリキュラムの課題実装が重い場合は時間をずらして、技術面談のprepをしていない

### Insight
- 事実: unbookmarkメソッドにidを渡す時とオブジェクトを渡した時の違いを検証と言語化する / 次の一手: (検証実行)

## Technical Learnings
### Rails: Bookmark Controller Logic
- **Issue**: bookmarkに関連する処理なのになぜbookmarkコントローラーレイヤーでCRUD操作がないのか？
- **Solution/Hypothesis**:
  - CRUD操作は行われていた。ビジネスロジックをUserモデルに集約していてアソシエーション定義時に生成されたメソッドを使うことで `users`, `bookmarks`, `boards` テーブルに対してCRUD操作を行っていた。

### Rails: Create vs Destroy Action Difference
- **Issue**: createアクション、destoryアクション違いを言語化すると
- **Solution/Hypothesis**:
  - **createアクション**: リクエストされたURLに含まれるidを取得 → 対象のボードの情報オブジェクトをfindメソッドで取得。ブックマークされたオブジェクトとしてcollectionメソッドで管理する。
  - **destroyアクション**: createアクションとの違いはヘルパーメソッドの引数にオブジェクトが返ってきていたこと。
- **Evidence**:
  - このロジックを理解せずに `bookmarks/:id` がコントローラーにリクエストされると考えていたので以下のエラーが発生しておりdeleteアクションへルーティングされなかった。
  - エラー: `ActiveRecord::RecordNotFound (Couldn't find Board without an ID)`
- **Code**:
  ```ruby
  <%= link_to bookmark_path(current_user.bookmarks.find_by(board_id: board.id)), method: :delete %>
  # current_user.bookmarks.find_by(board_id: board.id)
  # find_byで該当するブックマークされた掲示板情報オブジェクトを取得
  # → `/bookmarks/:id` というパスを生成
  ```

### Rails: unbookmark method
- **Issue**: unbookmarkメソッドにidを渡す時とオブジェクトを渡した時の違い
- **Code**:
  ```ruby
  def unbookmark(board)
    bookmark_boards.destroy(board)
  end
  ```
