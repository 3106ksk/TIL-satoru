# 2026-01-16

- Date: 2026-01-16
- Budget (min): 300
- Top 1: エラー情報バグを技術相談内容でリサーチ → 技術面談を行う
- Done 条件: 15:00 になったら
- Total Min: 283
- Deep Work Min: 30
- Avg Deep Score: 3.5
- Sessions DB (参照先):
  - Untitled (https://www.notion.so/2e9d5c5438fd8091ad58df27c13a6fb9?pvs=21)
  - Untitled (https://www.notion.so/2e9d5c5438fd8089815dfc2b9d17f09a?pvs=21)
  - Untitled (https://www.notion.so/2ead5c5438fd80e685a1ce49b73db882?pvs=21)
  - Untitled (https://www.notion.so/2ead5c5438fd801c9d17c5b81a1e5bf4?pvs=21)
  - Untitled (https://www.notion.so/2ead5c5438fd8073b8fadf30f1290c7a?pvs=21)
  - Untitled (https://www.notion.so/2ead5c5438fd80dd861fe1a4bd3db586?pvs=21)
  - Untitled (https://www.notion.so/2ead5c5438fd800693c0cb6acbc3c0ea?pvs=21)
- In Last Week: No
- In This Week: Yes
- WeekKey: 2026-W03

## A) Pre-Study（学習前：意図）

### Question（今日知りたいこと）

- ログを見てバグを解決のカリキュラムを以下のデバッグプロセスを使いながらデバッグをする

① 起きている現象は何か？  
② 本来どうあるべきか？  
③ どこまでは正常だったか？  
④ 何が原因だと仮説を立てるか？  
⑤ それをどう検証するか？  
⑥ 原因は何だったか？  
⑦ 再発防止として何を残すか？  

### Key Insight（今日のハイライト学び）

- 以下の項目を使いながらデバッグをすると、「エラーが起きているがどこを見れば良いか分からないから」
- 「エラーが発生している箇所に当たりをつける、なんとなくここが問題かな」というまとめができるので、再現性が増したような感覚があった

#### ① 起きている現象は何か？

- [Tagify]: input element not found がコンソールで出ている
- 削除ボタンを押しても投稿が消えない
- rspec で以下のエラー

```jsx
     Failure/Error: page.accept_confirm { find("#button-delete-#{post.id}").click }
     
     Capybara::ModalNotFound:
       Unable to find modal dialog
```

- docker ログ → 削除ボタンを押しても show アクションが実行されている
- destroy アクションの binding が実行されなかった
- （これが根本の原因）docker のログを確認していなかった

#### ② 本来どうあるべきか？

- ログインユーザーが投稿した場合、削除ボタンを押すと消すことが可能
- delete アクションで current.user の投稿を db から検索（url から送られる params）
- 一覧ページへリダイレクト

#### ③ どこまでは正常だったか？

- 投稿は可能、詳細ページから削除リンクは表示

#### ④ 何が原因だと仮説を立てるか？

- controller と view での destory がうまくいっていない？？
- [Tagify]: input element not found → 削除ボタンがない？
- Controller # delete のコードミス？
- app/views/posts/show.html.erb: <%= link_to post_path(@post), id: "button-delete-#{@post.id}", method: :delete, data: { confirm: "本当に削除しますか？" } do %> → 削除するポストの受け渡しができていないのか？
- post.destroy! がメソッドの間違い？！は必要？

#### ⑤ それをどう検証するか？

- [Tagify]: input element not found がどんな時に発生するエラーだったかを調べる
- MVC の観点でデータの流れが正常かをチェックする
- 該当の post が渡っているかをチェック ❌

```ruby
          <li>
            binding.break
              <%= link_to post_path(@post), id: "button-delete-#{@post.id}", method: :delete, data: { confirm: "本当に削除しますか？" } do %>
                <%= image_tag "delete.svg", class: "w-4 h-4 me-2" %>
                <span>削除する</span>
              <% end %>
            </li>
```

- binding に行かずに show アクションが実行されている

#### ⑥ 原因は何だったか？

- delete アクションが作動して欲しいのに show アクションが処理されていた

```jsx
09:51:31 web.1  | Started GET "/posts/21.json" for 192.168.65.1 at 2026-01-16 09:51:31 +0900
09:51:31 web.1  | Cannot render console from 192.168.65.1! Allowed networks: 127.0.0.0/127.255.255.255, ::1
09:51:31 web.1  | Processing by PostsController#show as JSON
09:51:31 web.1  |   Parameters: {"id"=>"21"}
09:51:31 web.1  |   Post Load (0.2ms)  SELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2  [["id", 21], ["LIMIT", 1]]
09:51:31 web.1  |   ↳ app/controllers/posts_controller.rb:18:in `block (2 levels) in show'
09:51:31 web.1  | Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
```

- https://qiita.com/jnchito/items/5c41a7031404c313da1f
- 参照箇所：link_to の `method:` オプションの書き方が変わった
- バージョン変更による仕様の変更

```jsx
<%= link_to post_path(@post), id: "button-delete-#{@post.id}", method: :delete, data: { confirm: "本当に削除しますか？" } do %>
```

#### ⑦ 再発防止として何を残すか？

- （未記入）
